<ngb-tabset *ngIf="prestation" (tabChange)="beforeTabChange($event)" [activeId]="state.selectedTabId">
	<ngb-tab title="Info" id="tabInfo">
		<template ngbTabContent>
			<div class="card">
				<div class="card-block">
					<div class="row">
						<div class="col-sm-2">prestation:</div>
						<div class="col-sm-6">{{prestation.data.reference}}</div>
					</div>
					<div class="row">
						<div class="col-sm-2">label:</div>
						<div class="col-sm-6">{{prestation.annotation.label}}</div>
					</div>
					<div class="row">
						<div class="col-sm-2">description:</div>
						<div class="col-sm-6">{{prestation.data.description}}</div>
					</div>
					<div class="row">
						<div class="col-sm-2">price:</div>
						<div class="col-sm-6">{{prestation.data.price | currency:'EUR':true:'1.2-2'}}</div>
					</div>
				</div>
			</div>
		</template>
	</ngb-tab>
	<ngb-tab title="Manip Sheet" id="tabManipulations">
		<template ngbTabContent>
			<div class="card">
				<div class="card-block">
					<form [formGroup]="formManipSheet" (ngSubmit)="save(formManipSheet.value, formManipSheet.valid)">
						<div class="row" *ngFor="let manip of manipsObservable | async" [formGroupName]="manip.data._id">
							<div class="col-sm-3">
								<label class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" formControlName="useManip"/>
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">{{manip.data.name}}</span>
                            </label>
							</div>
							<div class="col-sm-8">
								<div class="row" *ngFor="let product of manip.annotation.products" [formGroupName]="product.data._id">
									<div class="form-group row">
										<label class="col-sm-5 col-form-label">Nb of {{product.data.Description}}:</label>
										<div class="col-sm-6">
											<input type="number" min="0" class="form-control" placeholder="number of units" formControlName="nbUnits" />
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-3 col-md-2 col-lg-2">
								<button class="btn btn-success" type="submit" [disabled]="!formManipSheet.valid">Submit</button>
							</div>
							<div class="col-sm-3 col-md-2 col-lg-2">
								<button class="btn btn-info" [disabled]="formManipSheet.pristine" (click)="reset()">Reset</button>
							</div>
						</div>

					</form>
				</div>
			</div>
		</template>
	</ngb-tab>
	<ngb-tab title="Working hours" id="tabWorkingHours">
		<template ngbTabContent>
			<div class="card">
				<div class="card-block">
						<div class="row" *ngFor="let manip of manipsObservable | async" [formGroupName]="manip.data._id">
							<div class="col-sm-3">
								<label class="custom-control custom-checkbox">
                                <input type="checkbox" class="custom-control-input" formControlName="useManip"/>
                                <span class="custom-control-indicator"></span>
                                <span class="custom-control-description">{{manip.data.name}}</span>
                            </label>
							</div>
							<div class="col-sm-8">
								<div class="row" *ngFor="let product of manip.annotation.products" [formGroupName]="product.data._id">
									<div class="form-group row">
										<label class="col-sm-5 col-form-label">Nb of {{product.data.Description}}:</label>
										<div class="col-sm-6">
											<input type="number" min="0" class="form-control" placeholder="number of units" formControlName="nbUnits" />
										</div>
									</div>
								</div>
							</div>
						</div>
				</div>
			</div>
		</template>
	</ngb-tab>
</ngb-tabset>